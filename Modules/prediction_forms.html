<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prediction Forms</title>
  <link rel="stylesheet" href="../HUD/style.css">
  <style>
    body { background: #0f0f0f; color: #0ff; font-family: Arial, sans-serif; padding: 20px; }
    h1, h2 { text-align: center; }
    form { max-width: 500px; margin: 20px auto; background: #111; padding: 20px; border-radius: 8px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: none; }
    button { margin-top: 15px; padding: 10px; background: #0ff; color: #000; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #0cc; }
    .hunt-selector { text-align: center; margin-bottom: 20px; }
    #status-message { text-align: center; margin-top: 20px; font-size: 1rem; }
  </style>
</head>
<body>
  <h1>Prediction Forms</h1>
  <div class="hunt-selector">
    <label for="hunt-type">Select Hunt Type:</label>
    <select id="hunt-type" onchange="changeHuntType()">
      <option value="mega">Mega Hunt</option>
      <option value="super">Super Hunt</option>
      <option value="player">Player Hunt</option>
    </select>
  </div>

  <form id="prediction-form" onsubmit="submitPrediction(event)">
    <h2 id="form-title">Mega Hunt Predictions</h2>
    <label for="username">Username:</label>
    <input type="text" id="username" required />

    <label for="hundredx">How many 100x wins?</label>
    <input type="number" id="hundredx" min="0" required />

    <label for="top-game">Which game will have the highest multiplier?</label>
    <select id="top-game"></select>

    <label for="profit">Will the hunt end in profit?</label>
    <select id="profit">
      <option value="yes">Yes</option>
      <option value="no">No</option>
    </select>

    <button type="submit">Submit Prediction</button>
  </form>

  <p id="status-message"></p>

  <script>
    const megaGames = [
      "Wild Wild Riches Megaways", "Extra Juicy Megaways", "Power of Thor Megaways",
      "Lucky Fishing Megaways", "Power of Merlin Megaways", "Muertos Multiplier Megaways",
      "Yum Yum Powerways", "Raven Rising", "Eastern Emeralds Megaways",
      "Rocket Blast Megaways", "Mammoth Gold Megaways", "Merlins Revenge Megaways",
      "Cherry Pop", "Bounty Pop"
    ];

    const superGames = [
      "2 Wild 2 Die", "Bloodthirst", "Book of Time", "Bouncy Bombs",
      "Chaos Crew", "Cursed Seas", "Densho", "Dork Unit",
      "Double Rainbow", "Drop ‘Em", "Duba Dice", "F.R.I.E.S",
      "Forest Fortune", "Frank’s Farm", "Fruit Duel", "Hand of Anubis"
    ];

    const googleScriptURL = "YOUR_GOOGLE_SCRIPT_WEB_APP_URL"; // Replace with your Apps Script URL

    function populateGameDropdown(games) {
      const dropdown = document.getElementById('top-game');
      dropdown.innerHTML = '';
      games.forEach(game => {
        const option = document.createElement('option');
        option.value = game;
        option.textContent = game;
        dropdown.appendChild(option);
      });
    }

    function changeHuntType() {
      const huntType = document.getElementById('hunt-type').value;
      const formTitle = document.getElementById('form-title');
      if (huntType === 'mega') {
        formTitle.innerText = 'Mega Hunt Predictions';
        populateGameDropdown(megaGames);
      } else if (huntType === 'super') {
        formTitle.innerText = 'Super Hunt Predictions';
        populateGameDropdown(superGames);
      } else {
        formTitle.innerText = 'Player Hunt Predictions';
        populateGameDropdown([]);
      }
    }

    async function submitPrediction(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const hundredx = document.getElementById('hundredx').value;
      const topGame = document.getElementById('top-game').value;
      const profit = document.getElementById('profit').value;
      const huntType = document.getElementById('hunt-type').value;

      const data = { username, hundredx, topGame, profit, huntType };

      document.getElementById('status-message').innerText = "Submitting...";

      try {
        const response = await fetch(googleScriptURL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('status-message').innerText = "✅ Prediction submitted successfully!";
        document.getElementById('prediction-form').reset();
        changeHuntType(); // Reset games dropdown
      } catch (err) {
        document.getElementById('status-message').innerText = "❌ Submission failed. Try again.";
      }
    }

    // Initialize Mega Hunt as default
    populateGameDropdown(megaGames);
  </script>
</body>
</html>
